# 운영체제 1일차

## 프로세스와 스레드 차이

**프로세스**는 **실행 중인 프로그램**입니다. 즉, 프로세스는 **운영체제로부터** 자원을 할당받는 **최소한의 작업의 단위**입니다. 프로세스는 독립된 메모리 영역 **Code, Data, Stack, Heap**을 할당받습니다.

**스레드**는 프로세스 내에서 **실행되는 여러 흐름의 단위**입니다. 스레드는 프로세스 내에서 Stack 메모리 영역을 제외한 다른 메모리 영역을 같은 프로세스 내 다른 스레드와 공유합니다.

## 스레드가 스택은 따로 독립적으로 할당받는 이유

스택은 **함수 호출 시 전달되는 인자, 되돌아갈 주소값 및 함수 내에서 선언하는 변수** 등을 저장하기 위해 사용되는 메모리 공간입니다.

스택 메모리 공간이 독립적이라는 것은 독립적인 함수 호출이 가능하다는 것이고 이는 **독립적인 실행 흐름이 추가**되는 것입니다.

따라서 스레드의 정의에 따라 **독립적인 실행 흐름을 추가하기 위한 최소 조건** 으로 독립된 스택을 할당합니다.

## 멀티스레드

 하나의 프로세스에 하나의 스레드, 즉 메인 스레드가 함께 생성됩니다. 하나의 프로세스는 여러 개의 스레드를 가질 수 있습니다.

- 장점

멀티 프로세스로 실행되는 작업을 멀티 스레드로 실행할 경우, 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있습니다.
Context Switching시 스레드는 Stack 영역만 바꾸어주면 되기 때문에 프로세스 간의 전환 속도보다 스레드 간의 전환 속도가 빠릅니다.

- 단점

여러 스레드가 함께 전역 변수를 사용할 경우 운영체제가 스케줄링을 자동으로 해주지 않기 때문에 충돌이 발생할 수 있습니다. 따라서 스레드 간에 통신할 경우에는 충돌 문제가 발생하지 않도록 **동기화 문제**를 해결해야 합니다.

멀티스레드는 스레드끼리 같은 코드 블럭을 공유 하기 때문에 디버깅이 어렵습니다.

## 멀티스레드 vs 멀티프로세스

멀티프로세스는 프로그램을 여러 개 키는 것입니다. 멀티스레드는 하나의 프로그램 안에서 여러 작업을 해결하는 것입니다.

부모 프로세스와 독립적인 메모리 공간을 갖습니다. 따라서 PCB블록이 다르므로 Context Switching 오버 헤드가 많습니다.

## Thread-safe

Thread safe는 멀티 스레드 프로그래밍 환경에서 일반적으로 어떤 **함수나 변수, 혹은 객체**가 **여러 스레드로부터 동시에 접근이 이루어져도 프로그램의 실행에 문제가 없는 것**을 말합니다.

Thread-safe한 코드를 만들기 위해서는 **Critical Session**을 통해 스레드 내부에서 처리되는 **연산들을 직렬화** 하여 한 번에 한 스레드에서 연산이 수행되도록 만들어 주어야 합니다.

- 참고자료

    [https://velog.io/@raejoonee/프로세스와-스레드의-차이](https://velog.io/@raejoonee/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4)

    [https://ohcode.tistory.com/2](https://ohcode.tistory.com/2)

    [https://velog.io/@emily0_0/OS-Process-Thread](https://velog.io/@emily0_0/OS-Process-Thread)