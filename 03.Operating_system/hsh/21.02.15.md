# 21.02.16

## 주요 질문

#### 💡 운영체제란?
   * 일반적으로 하드웨어를 관리하고, 응용 프로그램과 하드웨어 사이에서 인터페이스 역할을 하며 시스템의 동작을 제어하는 시스템 소프트웨어를 운영체제라고 합니다.
   
#### 💡 프로세스란 무엇인가?
   *  프로세스(process)는 실행 중인 하나의 애플리케이션을 말한다. 사용자가 애플리케이션을 실행하면 운영체제는 메모리를 할당하여 애플리케이션의 코드를 실행시키는데 이것을 프로세스라고 합니다.

#### 💡 프로세스의 주소공간에 대해 설명하시오.
   * 프로그램이 CPU에 의해 실행되면 프로세스가 생성되고 메모리에 '프로세스 주소 공간'이 할당됩니다. 이 때 프로세스 주소 공간은 코드, 데이터, 스택, 힙 영역으로 이루어져 있습니다.
     * 코드 Segment : 프로그램 소스 코드 저장
     * 데이터 Segment : 전역 변수 저장
     * 스택 Segment : 함수, 지역 변수 저장
     * 힙 Heap : 동적 할당 시 사용

#### 💡 쓰레드(Thread)란 무엇인가?
   * 쓰레드란 프로세스 내에서 실행되는 실행 단위이다. 프로세스가 할당받은 자원을 이용하며 메모리, 자원 등을 공유한다. 프로세스의 Code, Data, Heap영역을 공유하고 있으며, Stack만 스레드 별로 가지게 됩니다. 

#### 💡 다른 자원들은 공유하지만 굳이 스택만 분리해서 사용하는 이유는? 
   * 후입 선출이라는 스택의 특성과도 연관이 있습니다. 코드와 데이터 힙 영역을 공유하는 것에는 큰 문제가 없지만, 스택 영역은 스택이 쌓이면 위에서부터 프로세스가 섞인 채로 순서대로 나오게 되므로 더 복잡해지기 때문에 원활한 실행 흐름을 위해 스택은 따로 독립적으로 존재하게 됩니다. 

#### 💡 멀티 프로세스 대신 멀티 스레드를 사용하는 이유
   * 프로그램을 여러 개 키는 것보다 하나의 프로그램 안에서 여러 작업을 해결하기 위해서 입니다. 이유는 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어 들어 자원을 효율적으로 관리할 수 있습니다. 또한 프로세스간의 통신보다 쓰레드 간의 통신의 비용이 적기 때문에 멀티 프로세스보다 멀티 스레드를 사용하는 이유입니다.
    <img src = "https://media.vlpt.us/images/hoo00nn/post/ac27535e-13fc-4bcc-8fdd-6e584998f059/image.png">
   > https://velog.io/@hoo00nn/멀티-프로세스와-멀티-스레드

#### 💡 Thread-Safe란?
   * 멀티스레드 환경에서 여러 스레드가 동시에 하나의 객체 및 변수에 접근할 때 충돌이 발생하지 않고 동작하는 것을 "Thread-Safe하다" 라고 표현합니다.


#### 💡 [Mutex와 Semaphore 차이](#-mutex와-semaphore의-차이)
   * Mutex는 동기화 대상이 오직 하나뿐일 때, Semaphore는 동기화 대상이 하나 이상일 때 사용합니다. 
      * 뮤텍스: 한 쓰레드, 프로세스에 의해 소유될 수 있는 Key🔑를 기반으로 한 상호배제기법
      * 세마포어: Signaling mechanism. 현재 공유자원에 접근할 수 있는 쓰레드, 프로세스의 수를 나타내는 값을 두어 상호배제를 달성하는 기법

멀티스레드 
<br/>

## 심화 질문

#### 💡 자바 스레드(Java Thread)란?
   * 일반 스레드와 거의 차이가 없으며, JVM가 운영체제의 역할을 한다.
   * 자바에는 프로세스가 존재하지 않고 스레드만 존재하며, 자바 스레드는 JVM에 의해 스케줄되는 실행 단위 코드 블록이다.
   * 자바에서 스레드 스케줄링은 전적으로 JVM에 의해 이루어진다.

#### 💡 프로세스와 쓰레드(Thread)를 설명할 수 있는 예시를 말해보시오.
   * 프로세스와 쓰레드를 설명할 수 있는 쉬운 예는 곰플레이어와 같은 프로그램이다. 영상 파일을 클릭하면 이 프로그램은 자막이 있으면 자막을 보여주고, 사운드를 들려주고, 영상을 보여주며 전체화면으로 바꾸면 끊기지 않고 전체화면으로 바꿔준다. 이것은 단일 프로세스의 단일 쓰레드로는 구현이 불가능하다. 사운드를 들려주는 쓰레드, 영상을 보여주는 쓰레드, 프레임을 조정하는 쓰레드, 자막을 관리하는 쓰레드가 각자 자기 할일을 하고 있으며, 각각의 쓰레드가 CPU의 자원을 독점적으로 쓰지 않고 적절히 양보하면서 쓰기 때문에 가능하다.
   > https://sungjk.github.io/2015/11/29/Process-Thread.html
  
#### 💡 프로세스의 주소공간을 나눈 이유
   * 최대한 데이터를 공유하여 메모리 사용량을 줄여야 합니다. Code는 같은 프로그램 자체에서는 모두 같은 내용이기 때문에 따로 관리하여 공유합니다. Stack과 data를 나눈 이유는, 스택 구조의 특성과 전역 변수의 활용성을 위한 것이다. 프로그램의 함수와 지역 변수는, LIFO(가장 나중에 들어간게 먼저 나옴)특성을 가진 스택에서 실행된다. 따라서 이 함수들 안에서 공통으로 사용하는 '전역 함수'는 따로 지정해주면 메모리를 아낄 수 있다.
   > https://gyoogle.dev/blog/computer-science/operating-system/Process%20Address%20Space.html

<br/>

## 개념 정리

### ⭐ 멀티 프로세스와 멀티 쓰레드
   #### 멀티 프로세스
   <img src = "https://media.vlpt.us/images/hoo00nn/post/04d6ff7a-2ff7-4338-b788-bc601a8191e3/image.png"><br>
   * 장점
      1. 하나의 프로세스가 비정상적으로 종료되더라도 다른 프로세스가 영향을 받지 않음
      2. 멀티 스레드처럼 동기화 작업이 별도로 필요하지 않음
   * 단점
      1. 자원 소모, 메모리 낭비, 문맥 교환으로 인한 비효율성
      2. IPC 통신으로 인한 비용

   #### 멀티 쓰레드
   <img src = "https://media.vlpt.us/images/hoo00nn/post/ac27535e-13fc-4bcc-8fdd-6e584998f059/image.png"><br>
   * 장점
      1. 문맥 교환에 소비되는 시간을 줄일 수 있음(스택 영역만 문맥교환이 일어남)
      2. 자원을 공유하기 때문에 메모리 낭비를 줄임
   * 단점
      1. 여러 개의 스레드는 프로세스 내부의 자원을 공유하기 때문에 하나의 스레드가 자신의 데이터 공간을 망가뜨린다면 해당 프로세스의 데이터를 공유하고 있는 모든 스레드의 치명적인 문제를 발생시킨다.
      2. 여러 개의 스레드를 이용하는 경우, 미묘한 시간차나 잘못된 변수를 공유함으로써 오류 발생 가능
따라서 스레드 간에 통신할 경우에는 충돌 문제가 발생하지 않도록 동기화 문제를 해결해야 합니다.
      > https://velog.io/@hoo00nn/멀티-프로세스와-멀티-스레드
### ⭐ Mutex와 Semaphore의 차이
   
   1. 가장 큰 차이점은 관리하는 **동기화 대상의 개수**
         * Mutex는 동기화 대상이 오직 하나뿐일 때, Semaphore는 동기화 대상이 하나 이상일 때 사용한다.
   2. Semaphore는 Mutex가 될 수 있지만 Mutex는 Semaphore가 될 수 없다.
         * Mutex는 상태가 0, 1 두 개 뿐인 binary Semaphore
   3. Semaphore는 소유할 수 없는 반면, Mutex는 소유가 가능하며 소유주가 이에 대한 책임을 가진다.
         * Mutex 의 경우 상태가 두개 뿐인 lock 이므로 lock 을 가질 수 있다.

   4. Mutex의 경우 Mutex를 소유하고 있는 스레드가 이 Mutex를 해제할 수 있다. 하지만 Semaphore의 경우 이러한 Semaphore를 소유하지 않는 스레드가 Semaphore를 해제할 수 있다.

   5. Semaphore는 시스템 범위에 걸쳐있고 파일시스템상의 파일 형태로 존재하는 반면 Mutex는 프로세스 범위를 가지며 프로세스가 종료될 때 자동으로 Clean up 된다.
      > 예제 : https://worthpreading.tistory.com/90
      
      > https://github.com/WeareSoft/tech-interview/blob/master/contents/os.md#뮤텍스와-세마포어의-차이
